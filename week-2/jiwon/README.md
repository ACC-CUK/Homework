# 2주차 과제

# API Gateway?

- 규모와 관계없이 REST(상태 비저장) 및 WebSocket(상태 저장) API를 생성, 게시, 유지, 모니터링 및 보호하기 위한 AWS 서비스이다.
- API 앞단의 모든 API 서버들의 엔드포인트를 단일화하여 묶어준다.
- API에 대한 인증과 인가 기능에서부터 메제지에 따라서 여러 서버로 라우팅하는 고급 기능까지 담당한다.
- 아래 RESTful API에 해당하는 API를 생성한다.
  - HTTP 기반
  - 상태 비저장 클라이언트-서버 통신을 활성화 한다.
  - 표준 HTTP 메서드를 구현한다.
- 아래 WenSocket API에 해당하는 API를 생성한다.
  - 클라리언트와 서버 간에 상태를 저장하는 전이중 통신을 지원하는 WebSocket 프로토콜 준수
  - 수신 메시지를 메시지 콘텐츠에 따라 라우팅

## 인증/ 인가에 관련된 기능

- 인증: API를 호출하는 클라이언트ㄷ 대한 신분을 확인한다.
- 인가: 클라리언트가 API를 호출할 수 있는 권한이 있는지를 확인한다.

<br>

### API 게이트웨이는 클라이언트를 인증한 후, API 토큰을 생성 및 발급해주는 역할을 한다.

> 토큰은 왜 사용하는가?

- 매번 사용자의 인증/인가 절차를 거치는 것은 불편하다.
- 그렇다고 사용자의 id나 비밀번호를 저장해두는 것은 해킹의 위험이 있다.
- 그리하여 사용자의 인증/인가가 끝나면, 사용자가 API를 호출할 수 있는 토큰을 발급해준다. 이후 API 서버는 이 토큰으로 사용자의 인증과 권한을 확인한 후, API 호출을 허가해준다.

<br>

## API 라우팅 기능

- 같은 API라도 사용하는 서비스나 클라리언트에 따라서 다른 엔드포ㅌ트를 이용해서 서비스를 제공하거나, 데이터 센터가 여러개일 때,데이터 센터 간의 라우팅 등을 지원하는 기능이다.

<br>

### 백엔드 API 서버로의 로드밸런싱

- 간단하게 말하자면 뒷단의 API 서버로 부하를 분산하는 기능이다.
- 재해 상황 시 로드 밸런싱 리스트에서 빼거나, 복구 시 포함하는 기능을 한다.

### 서비스 및 클라리언트 별 엔드포인트 제공

- API 서버가 공통적인 API를 가지더라도, 각 서비스나 클라이언트 타입에 따라서 각가 다른 API를 선별적으로 서비스할 수 있도록 한다.
  - 이는 같은 API라도 클라이언트의 종류에 따라서 인증 방식이나 보안 메커니즘이 다를 수 있기 때문이다.

### 메시지 또는 헤더기반 라우팅

- HTTP의 바디가 아니라 헤더로 라우팅할 경우, JSON을 API 게이트웨이가 파싱하여 열어보는 과정 없이 포워딩만 해도 된다.

<br>

## 공통 로직 처리

- API 게이트웨이는 특성상 모든 API 서버 앞쪽에 위치하기 떄문에 모든 API 호출이 이 API 게이트를 거쳐간다.
  - 따라서 공통적으로 처리해야하는 기능이 있을 경우, 해당 기능을 API 게이트웨이로 옮기게 되면 별도로 API 서버에서 그러한 기능을 구현할 필요가 없게 된다.
  - 즉 공통 계층에서 처리하게 되면 개발 중복을 줄일 수 있으며 표준 준수가 더 쉽다.

<br>

## 메디테이션 기능

- API 서버에서 제공되는 API가 클라이언트가 원하는 API 형태와 다를 때, API 게이트웨이가 이를 변경해주는 기능을 뜻한다.

### 메시지 포멧 변환
